export async function rootInfo() {
  if (!tmpDir) tmpDir = Deno.makeTempDirSync();
  const opts = {
    args: [
      "info",
      "--json",
      "--no-config",
      "--no-lock"
    ],
    cwd: tmpDir,
    env: {
      DENO_NO_PACKAGE_JSON: "true"
    },
    stdout: "piped",
    stderr: "inherit"
  };
  const output = await new Deno.Command(Deno.execPath(), opts).output();
  if (!output.success) {
    throw new Error(`Failed to call 'deno info'`);
  }
  const txt = new TextDecoder().decode(output.stdout);
  return JSON.parse(txt);
}
let tmpDir;
async function info(specifier, options) {
  const args = [
    "info",
    "--json"
  ];
  if (!Deno.version.deno.startsWith("1.")) {
    args.push("--allow-import");
  }
  const opts = {
    args,
    cwd: undefined,
    env: {
      DENO_NO_PACKAGE_JSON: "true"
    },
    stdout: "piped",
    stderr: "inherit"
  };
  if (typeof options.config === "string") {
    opts.args.push("--config", options.config);
  } else {
    opts.args.push("--no-config");
  }
  if (options.importMap) {
    opts.args.push("--import-map", options.importMap);
  }
  if (typeof options.lock === "string") {
    opts.args.push("--lock", options.lock);
  } else if (!options.cwd) {
    opts.args.push("--no-lock");
  }
  if (options.nodeModulesDir !== undefined) {
    if (Deno.version.deno.startsWith("1.")) {
      if (options.nodeModulesDir === "auto") {
        opts.args.push("--node-modules-dir");
      } else if (options.nodeModulesDir === "manual") {
        opts.args.push("--unstable-byonm");
      }
    } else {
      opts.args.push(`--node-modules-dir=${options.nodeModulesDir}`);
    }
  }
  if (options.cwd) {
    opts.cwd = options.cwd;
  } else {
    if (!tmpDir) tmpDir = Deno.makeTempDirSync();
    opts.cwd = tmpDir;
  }
  opts.args.push(specifier);
  const output = await new Deno.Command(Deno.execPath(), opts).output();
  if (!output.success) {
    throw new Error(`Failed to call 'deno info' on '${specifier}'`);
  }
  const txt = new TextDecoder().decode(output.stdout);
  return JSON.parse(txt);
}
export class InfoCache {
  #options;
  #pending = null;
  #modules = new Map();
  #redirects = new Map();
  #npmPackages = new Map();
  constructor(options = {}){
    this.#options = options;
  }
  async get(specifier) {
    let entry = this.#getCached(specifier);
    if (entry !== undefined) return entry;
    await this.#queueLoad(specifier);
    entry = this.#getCached(specifier);
    if (entry === undefined) {
      throw new Error(`Unreachable: '${specifier}' loaded but not reachable`);
    }
    return entry;
  }
  getNpmPackage(id) {
    return this.#npmPackages.get(id);
  }
  #resolve(specifier) {
    const original = specifier;
    let counter = 0;
    while(counter++ < 10){
      const redirect = this.#redirects.get(specifier);
      if (redirect === undefined) return specifier;
      specifier = redirect;
    }
    throw new Error(`Too many redirects for '${original}'`);
  }
  #getCached(specifier) {
    specifier = this.#resolve(specifier);
    return this.#modules.get(specifier);
  }
  async #queueLoad(specifier) {
    while(true){
      if (this.#pending === null) {
        this.#pending = {
          specifiers: new Set([
            specifier
          ]),
          done: (async ()=>{
            await new Promise((r)=>setTimeout(r, 5));
            const specifiers = this.#pending.specifiers;
            this.#pending.specifiers = null;
            await this.#load([
              ...specifiers
            ]);
            this.#pending = null;
          })()
        };
        await this.#pending.done;
        return;
      } else if (this.#pending.specifiers !== null) {
        this.#pending.specifiers.add(specifier);
        await this.#pending.done;
        return;
      } else {
        await this.#pending.done;
      }
    }
  }
  async #load(specifiers) {
    await this.#populate(specifiers);
    for (let specifier of specifiers){
      specifier = this.#resolve(specifier);
      const entry = this.#modules.get(specifier);
      if (entry === undefined && specifier.startsWith("npm:")) {
        // we hit https://github.com/denoland/deno/issues/18043, so we have to
        // perform another load to get the actual data of the redirected specifier
        await this.#populate([
          specifier
        ]);
      }
    }
  }
  async #populate(specifiers) {
    let specifier;
    if (specifiers.length === 1) {
      specifier = specifiers[0];
    } else {
      specifier = `data:application/javascript,${encodeURIComponent(specifiers.map((s)=>`import ${JSON.stringify(s)};`).join(""))}`;
    }
    const { modules, redirects, npmPackages } = await info(specifier, this.#options);
    for (const module of modules){
      if (specifiers.length !== 1 && module.specifier === specifier) continue;
      this.#modules.set(module.specifier, module);
    }
    for (const [from, to] of Object.entries(redirects)){
      this.#redirects.set(from, to);
    }
    if (npmPackages !== undefined) {
      for (const [id, npmPackage] of Object.entries(npmPackages)){
        this.#npmPackages.set(id, npmPackage);
      }
    }
  }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImh0dHBzOi8vanNyLmlvL0BsdWNhL2VzYnVpbGQtZGVuby1sb2FkZXIvMC4xMS4wL3NyYy9kZW5vLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgUm9vdEluZm9PdXRwdXQge1xuICBkZW5vRGlyOiBzdHJpbmc7XG4gIG5wbUNhY2hlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByb290SW5mbygpOiBQcm9taXNlPFJvb3RJbmZvT3V0cHV0PiB7XG4gIGlmICghdG1wRGlyKSB0bXBEaXIgPSBEZW5vLm1ha2VUZW1wRGlyU3luYygpO1xuICBjb25zdCBvcHRzID0ge1xuICAgIGFyZ3M6IFtcImluZm9cIiwgXCItLWpzb25cIiwgXCItLW5vLWNvbmZpZ1wiLCBcIi0tbm8tbG9ja1wiXSxcbiAgICBjd2Q6IHRtcERpcixcbiAgICBlbnY6IHsgREVOT19OT19QQUNLQUdFX0pTT046IFwidHJ1ZVwiIH0gYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPixcbiAgICBzdGRvdXQ6IFwicGlwZWRcIixcbiAgICBzdGRlcnI6IFwiaW5oZXJpdFwiLFxuICB9O1xuXG4gIGNvbnN0IG91dHB1dCA9IGF3YWl0IG5ldyBEZW5vLkNvbW1hbmQoXG4gICAgRGVuby5leGVjUGF0aCgpLFxuICAgIG9wdHMgYXMgRGVuby5Db21tYW5kT3B0aW9ucyxcbiAgKS5vdXRwdXQoKTtcbiAgaWYgKCFvdXRwdXQuc3VjY2Vzcykge1xuICAgIHRocm93IG5ldyBFcnJvcihgRmFpbGVkIHRvIGNhbGwgJ2Rlbm8gaW5mbydgKTtcbiAgfVxuICBjb25zdCB0eHQgPSBuZXcgVGV4dERlY29kZXIoKS5kZWNvZGUob3V0cHV0LnN0ZG91dCk7XG4gIHJldHVybiBKU09OLnBhcnNlKHR4dCk7XG59XG5cbi8vIExpZnRlZCBmcm9tIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9kZW5vbGFuZC9kZW5vX2dyYXBoLzg5YWZmZTQzYzlkM2Q1YzkxNjVjODA4OTY4N2MxMDdkNTNlZDhmZTEvbGliL21lZGlhX3R5cGUudHNcbmV4cG9ydCB0eXBlIE1lZGlhVHlwZSA9XG4gIHwgXCJKYXZhU2NyaXB0XCJcbiAgfCBcIk1qc1wiXG4gIHwgXCJDanNcIlxuICB8IFwiSlNYXCJcbiAgfCBcIlR5cGVTY3JpcHRcIlxuICB8IFwiTXRzXCJcbiAgfCBcIkN0c1wiXG4gIHwgXCJEdHNcIlxuICB8IFwiRG10c1wiXG4gIHwgXCJEY3RzXCJcbiAgfCBcIlRTWFwiXG4gIHwgXCJKc29uXCJcbiAgfCBcIldhc21cIlxuICB8IFwiVHNCdWlsZEluZm9cIlxuICB8IFwiU291cmNlTWFwXCJcbiAgfCBcIlVua25vd25cIjtcblxuaW50ZXJmYWNlIEluZm9PdXRwdXQge1xuICByb290czogc3RyaW5nW107XG4gIG1vZHVsZXM6IE1vZHVsZUVudHJ5W107XG4gIHJlZGlyZWN0czogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbiAgbnBtUGFja2FnZXM/OiBSZWNvcmQ8c3RyaW5nLCBOcG1QYWNrYWdlPjtcbn1cblxuZXhwb3J0IHR5cGUgTW9kdWxlRW50cnkgPVxuICB8IE1vZHVsZUVudHJ5RXJyb3JcbiAgfCBNb2R1bGVFbnRyeUVzbVxuICB8IE1vZHVsZUVudHJ5SnNvblxuICB8IE1vZHVsZUVudHJ5TnBtXG4gIHwgTW9kdWxlRW50cnlOb2RlO1xuXG5leHBvcnQgaW50ZXJmYWNlIE1vZHVsZUVudHJ5QmFzZSB7XG4gIHNwZWNpZmllcjogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZHVsZUVudHJ5RXJyb3IgZXh0ZW5kcyBNb2R1bGVFbnRyeUJhc2Uge1xuICBlcnJvcjogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZHVsZUVudHJ5RXNtIGV4dGVuZHMgTW9kdWxlRW50cnlCYXNlIHtcbiAga2luZDogXCJlc21cIjtcbiAgbG9jYWw6IHN0cmluZyB8IG51bGw7XG4gIGVtaXQ6IHN0cmluZyB8IG51bGw7XG4gIG1hcDogc3RyaW5nIHwgbnVsbDtcbiAgbWVkaWFUeXBlOiBNZWRpYVR5cGU7XG4gIHNpemU6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb2R1bGVFbnRyeUpzb24gZXh0ZW5kcyBNb2R1bGVFbnRyeUJhc2Uge1xuICBraW5kOiBcImFzc2VydGVkXCIgfCBcImpzb25cIjtcbiAgbG9jYWw6IHN0cmluZyB8IG51bGw7XG4gIG1lZGlhVHlwZTogTWVkaWFUeXBlO1xuICBzaXplOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9kdWxlRW50cnlOcG0gZXh0ZW5kcyBNb2R1bGVFbnRyeUJhc2Uge1xuICBraW5kOiBcIm5wbVwiO1xuICBucG1QYWNrYWdlOiBzdHJpbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9kdWxlRW50cnlOb2RlIGV4dGVuZHMgTW9kdWxlRW50cnlCYXNlIHtcbiAga2luZDogXCJub2RlXCI7XG4gIG1vZHVsZU5hbWU6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBOcG1QYWNrYWdlIHtcbiAgbmFtZTogc3RyaW5nO1xuICB2ZXJzaW9uOiBzdHJpbmc7XG4gIGRlcGVuZGVuY2llczogc3RyaW5nW107XG4gIHJlZ2lzdHJ5VXJsPzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEluZm9PcHRpb25zIHtcbiAgY3dkPzogc3RyaW5nO1xuICBjb25maWc/OiBzdHJpbmc7XG4gIGltcG9ydE1hcD86IHN0cmluZztcbiAgbG9jaz86IHN0cmluZztcbiAgbm9kZU1vZHVsZXNEaXI/OiBcImF1dG9cIiB8IFwibWFudWFsXCIgfCBcIm5vbmVcIjtcbn1cblxubGV0IHRtcERpcjogc3RyaW5nIHwgdW5kZWZpbmVkO1xuXG5hc3luYyBmdW5jdGlvbiBpbmZvKFxuICBzcGVjaWZpZXI6IHN0cmluZyxcbiAgb3B0aW9uczogSW5mb09wdGlvbnMsXG4pOiBQcm9taXNlPEluZm9PdXRwdXQ+IHtcbiAgY29uc3QgYXJncyA9IFtcImluZm9cIiwgXCItLWpzb25cIl07XG4gIGlmICghRGVuby52ZXJzaW9uLmRlbm8uc3RhcnRzV2l0aChcIjEuXCIpKSB7XG4gICAgYXJncy5wdXNoKFwiLS1hbGxvdy1pbXBvcnRcIik7XG4gIH1cbiAgY29uc3Qgb3B0cyA9IHtcbiAgICBhcmdzLFxuICAgIGN3ZDogdW5kZWZpbmVkIGFzIHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICBlbnY6IHsgREVOT19OT19QQUNLQUdFX0pTT046IFwidHJ1ZVwiIH0gYXMgUmVjb3JkPHN0cmluZywgc3RyaW5nPixcbiAgICBzdGRvdXQ6IFwicGlwZWRcIixcbiAgICBzdGRlcnI6IFwiaW5oZXJpdFwiLFxuICB9O1xuICBpZiAodHlwZW9mIG9wdGlvbnMuY29uZmlnID09PSBcInN0cmluZ1wiKSB7XG4gICAgb3B0cy5hcmdzLnB1c2goXCItLWNvbmZpZ1wiLCBvcHRpb25zLmNvbmZpZyk7XG4gIH0gZWxzZSB7XG4gICAgb3B0cy5hcmdzLnB1c2goXCItLW5vLWNvbmZpZ1wiKTtcbiAgfVxuICBpZiAob3B0aW9ucy5pbXBvcnRNYXApIHtcbiAgICBvcHRzLmFyZ3MucHVzaChcIi0taW1wb3J0LW1hcFwiLCBvcHRpb25zLmltcG9ydE1hcCk7XG4gIH1cbiAgaWYgKHR5cGVvZiBvcHRpb25zLmxvY2sgPT09IFwic3RyaW5nXCIpIHtcbiAgICBvcHRzLmFyZ3MucHVzaChcIi0tbG9ja1wiLCBvcHRpb25zLmxvY2spO1xuICB9IGVsc2UgaWYgKCFvcHRpb25zLmN3ZCkge1xuICAgIG9wdHMuYXJncy5wdXNoKFwiLS1uby1sb2NrXCIpO1xuICB9XG4gIGlmIChvcHRpb25zLm5vZGVNb2R1bGVzRGlyICE9PSB1bmRlZmluZWQpIHtcbiAgICBpZiAoRGVuby52ZXJzaW9uLmRlbm8uc3RhcnRzV2l0aChcIjEuXCIpKSB7XG4gICAgICBpZiAob3B0aW9ucy5ub2RlTW9kdWxlc0RpciA9PT0gXCJhdXRvXCIpIHtcbiAgICAgICAgb3B0cy5hcmdzLnB1c2goXCItLW5vZGUtbW9kdWxlcy1kaXJcIik7XG4gICAgICB9IGVsc2UgaWYgKG9wdGlvbnMubm9kZU1vZHVsZXNEaXIgPT09IFwibWFudWFsXCIpIHtcbiAgICAgICAgb3B0cy5hcmdzLnB1c2goXCItLXVuc3RhYmxlLWJ5b25tXCIpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBvcHRzLmFyZ3MucHVzaChgLS1ub2RlLW1vZHVsZXMtZGlyPSR7b3B0aW9ucy5ub2RlTW9kdWxlc0Rpcn1gKTtcbiAgICB9XG4gIH1cbiAgaWYgKG9wdGlvbnMuY3dkKSB7XG4gICAgb3B0cy5jd2QgPSBvcHRpb25zLmN3ZDtcbiAgfSBlbHNlIHtcbiAgICBpZiAoIXRtcERpcikgdG1wRGlyID0gRGVuby5tYWtlVGVtcERpclN5bmMoKTtcbiAgICBvcHRzLmN3ZCA9IHRtcERpcjtcbiAgfVxuXG4gIG9wdHMuYXJncy5wdXNoKHNwZWNpZmllcik7XG5cbiAgY29uc3Qgb3V0cHV0ID0gYXdhaXQgbmV3IERlbm8uQ29tbWFuZChcbiAgICBEZW5vLmV4ZWNQYXRoKCksXG4gICAgb3B0cyBhcyBEZW5vLkNvbW1hbmRPcHRpb25zLFxuICApLm91dHB1dCgpO1xuICBpZiAoIW91dHB1dC5zdWNjZXNzKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gY2FsbCAnZGVubyBpbmZvJyBvbiAnJHtzcGVjaWZpZXJ9J2ApO1xuICB9XG4gIGNvbnN0IHR4dCA9IG5ldyBUZXh0RGVjb2RlcigpLmRlY29kZShvdXRwdXQuc3Rkb3V0KTtcbiAgcmV0dXJuIEpTT04ucGFyc2UodHh0KTtcbn1cblxuZXhwb3J0IGNsYXNzIEluZm9DYWNoZSB7XG4gICNvcHRpb25zOiBJbmZvT3B0aW9ucztcblxuICAjcGVuZGluZzogeyBkb25lOiBQcm9taXNlPHZvaWQ+OyBzcGVjaWZpZXJzOiBTZXQ8c3RyaW5nPiB8IG51bGwgfSB8IG51bGwgPVxuICAgIG51bGw7XG5cbiAgI21vZHVsZXM6IE1hcDxzdHJpbmcsIE1vZHVsZUVudHJ5PiA9IG5ldyBNYXAoKTtcbiAgI3JlZGlyZWN0czogTWFwPHN0cmluZywgc3RyaW5nPiA9IG5ldyBNYXAoKTtcbiAgI25wbVBhY2thZ2VzOiBNYXA8c3RyaW5nLCBOcG1QYWNrYWdlPiA9IG5ldyBNYXAoKTtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zOiBJbmZvT3B0aW9ucyA9IHt9KSB7XG4gICAgdGhpcy4jb3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICBhc3luYyBnZXQoc3BlY2lmaWVyOiBzdHJpbmcpOiBQcm9taXNlPE1vZHVsZUVudHJ5PiB7XG4gICAgbGV0IGVudHJ5ID0gdGhpcy4jZ2V0Q2FjaGVkKHNwZWNpZmllcik7XG4gICAgaWYgKGVudHJ5ICE9PSB1bmRlZmluZWQpIHJldHVybiBlbnRyeTtcblxuICAgIGF3YWl0IHRoaXMuI3F1ZXVlTG9hZChzcGVjaWZpZXIpO1xuXG4gICAgZW50cnkgPSB0aGlzLiNnZXRDYWNoZWQoc3BlY2lmaWVyKTtcbiAgICBpZiAoZW50cnkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbnJlYWNoYWJsZTogJyR7c3BlY2lmaWVyfScgbG9hZGVkIGJ1dCBub3QgcmVhY2hhYmxlYCk7XG4gICAgfVxuICAgIHJldHVybiBlbnRyeTtcbiAgfVxuXG4gIGdldE5wbVBhY2thZ2UoaWQ6IHN0cmluZyk6IE5wbVBhY2thZ2UgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLiNucG1QYWNrYWdlcy5nZXQoaWQpO1xuICB9XG5cbiAgI3Jlc29sdmUoc3BlY2lmaWVyOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IG9yaWdpbmFsID0gc3BlY2lmaWVyO1xuICAgIGxldCBjb3VudGVyID0gMDtcbiAgICB3aGlsZSAoY291bnRlcisrIDwgMTApIHtcbiAgICAgIGNvbnN0IHJlZGlyZWN0ID0gdGhpcy4jcmVkaXJlY3RzLmdldChzcGVjaWZpZXIpO1xuICAgICAgaWYgKHJlZGlyZWN0ID09PSB1bmRlZmluZWQpIHJldHVybiBzcGVjaWZpZXI7XG4gICAgICBzcGVjaWZpZXIgPSByZWRpcmVjdDtcbiAgICB9XG4gICAgdGhyb3cgbmV3IEVycm9yKGBUb28gbWFueSByZWRpcmVjdHMgZm9yICcke29yaWdpbmFsfSdgKTtcbiAgfVxuXG4gICNnZXRDYWNoZWQoc3BlY2lmaWVyOiBzdHJpbmcpOiBNb2R1bGVFbnRyeSB8IHVuZGVmaW5lZCB7XG4gICAgc3BlY2lmaWVyID0gdGhpcy4jcmVzb2x2ZShzcGVjaWZpZXIpO1xuICAgIHJldHVybiB0aGlzLiNtb2R1bGVzLmdldChzcGVjaWZpZXIpO1xuICB9XG5cbiAgYXN5bmMgI3F1ZXVlTG9hZChzcGVjaWZpZXI6IHN0cmluZykge1xuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICBpZiAodGhpcy4jcGVuZGluZyA9PT0gbnVsbCkge1xuICAgICAgICB0aGlzLiNwZW5kaW5nID0ge1xuICAgICAgICAgIHNwZWNpZmllcnM6IG5ldyBTZXQoW3NwZWNpZmllcl0pLFxuICAgICAgICAgIGRvbmU6IChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocikgPT4gc2V0VGltZW91dChyLCA1KSk7XG4gICAgICAgICAgICBjb25zdCBzcGVjaWZpZXJzID0gdGhpcy4jcGVuZGluZyEuc3BlY2lmaWVycyE7XG4gICAgICAgICAgICB0aGlzLiNwZW5kaW5nIS5zcGVjaWZpZXJzID0gbnVsbDtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuI2xvYWQoWy4uLnNwZWNpZmllcnNdKTtcbiAgICAgICAgICAgIHRoaXMuI3BlbmRpbmcgPSBudWxsO1xuICAgICAgICAgIH0pKCksXG4gICAgICAgIH07XG4gICAgICAgIGF3YWl0IHRoaXMuI3BlbmRpbmcuZG9uZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIGlmICh0aGlzLiNwZW5kaW5nLnNwZWNpZmllcnMgIT09IG51bGwpIHtcbiAgICAgICAgdGhpcy4jcGVuZGluZy5zcGVjaWZpZXJzLmFkZChzcGVjaWZpZXIpO1xuICAgICAgICBhd2FpdCB0aGlzLiNwZW5kaW5nLmRvbmU7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGF3YWl0IHRoaXMuI3BlbmRpbmcuZG9uZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBhc3luYyAjbG9hZChzcGVjaWZpZXJzOiBzdHJpbmdbXSk6IFByb21pc2U8dm9pZD4ge1xuICAgIGF3YWl0IHRoaXMuI3BvcHVsYXRlKHNwZWNpZmllcnMpO1xuICAgIGZvciAobGV0IHNwZWNpZmllciBvZiBzcGVjaWZpZXJzKSB7XG4gICAgICBzcGVjaWZpZXIgPSB0aGlzLiNyZXNvbHZlKHNwZWNpZmllcik7XG4gICAgICBjb25zdCBlbnRyeSA9IHRoaXMuI21vZHVsZXMuZ2V0KHNwZWNpZmllcik7XG4gICAgICBpZiAoZW50cnkgPT09IHVuZGVmaW5lZCAmJiBzcGVjaWZpZXIuc3RhcnRzV2l0aChcIm5wbTpcIikpIHtcbiAgICAgICAgLy8gd2UgaGl0IGh0dHBzOi8vZ2l0aHViLmNvbS9kZW5vbGFuZC9kZW5vL2lzc3Vlcy8xODA0Mywgc28gd2UgaGF2ZSB0b1xuICAgICAgICAvLyBwZXJmb3JtIGFub3RoZXIgbG9hZCB0byBnZXQgdGhlIGFjdHVhbCBkYXRhIG9mIHRoZSByZWRpcmVjdGVkIHNwZWNpZmllclxuICAgICAgICBhd2FpdCB0aGlzLiNwb3B1bGF0ZShbc3BlY2lmaWVyXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgI3BvcHVsYXRlKHNwZWNpZmllcnM6IHN0cmluZ1tdKSB7XG4gICAgbGV0IHNwZWNpZmllcjtcbiAgICBpZiAoc3BlY2lmaWVycy5sZW5ndGggPT09IDEpIHtcbiAgICAgIHNwZWNpZmllciA9IHNwZWNpZmllcnNbMF07XG4gICAgfSBlbHNlIHtcbiAgICAgIHNwZWNpZmllciA9IGBkYXRhOmFwcGxpY2F0aW9uL2phdmFzY3JpcHQsJHtcbiAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KFxuICAgICAgICAgIHNwZWNpZmllcnMubWFwKChzKSA9PiBgaW1wb3J0ICR7SlNPTi5zdHJpbmdpZnkocyl9O2ApLmpvaW4oXCJcIiksXG4gICAgICAgIClcbiAgICAgIH1gO1xuICAgIH1cbiAgICBjb25zdCB7IG1vZHVsZXMsIHJlZGlyZWN0cywgbnBtUGFja2FnZXMgfSA9IGF3YWl0IGluZm8oXG4gICAgICBzcGVjaWZpZXIsXG4gICAgICB0aGlzLiNvcHRpb25zLFxuICAgICk7XG4gICAgZm9yIChjb25zdCBtb2R1bGUgb2YgbW9kdWxlcykge1xuICAgICAgaWYgKHNwZWNpZmllcnMubGVuZ3RoICE9PSAxICYmIG1vZHVsZS5zcGVjaWZpZXIgPT09IHNwZWNpZmllcikgY29udGludWU7XG4gICAgICB0aGlzLiNtb2R1bGVzLnNldChtb2R1bGUuc3BlY2lmaWVyLCBtb2R1bGUpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IFtmcm9tLCB0b10gb2YgT2JqZWN0LmVudHJpZXMocmVkaXJlY3RzKSkge1xuICAgICAgdGhpcy4jcmVkaXJlY3RzLnNldChmcm9tLCB0byk7XG4gICAgfVxuICAgIGlmIChucG1QYWNrYWdlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBmb3IgKGNvbnN0IFtpZCwgbnBtUGFja2FnZV0gb2YgT2JqZWN0LmVudHJpZXMobnBtUGFja2FnZXMpKSB7XG4gICAgICAgIHRoaXMuI25wbVBhY2thZ2VzLnNldChpZCwgbnBtUGFja2FnZSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBS0EsT0FBTyxlQUFlO0VBQ3BCLElBQUksQ0FBQyxRQUFRLFNBQVMsS0FBSyxlQUFlO0VBQzFDLE1BQU0sT0FBTztJQUNYLE1BQU07TUFBQztNQUFRO01BQVU7TUFBZTtLQUFZO0lBQ3BELEtBQUs7SUFDTCxLQUFLO01BQUUsc0JBQXNCO0lBQU87SUFDcEMsUUFBUTtJQUNSLFFBQVE7RUFDVjtFQUVBLE1BQU0sU0FBUyxNQUFNLElBQUksS0FBSyxPQUFPLENBQ25DLEtBQUssUUFBUSxJQUNiLE1BQ0EsTUFBTTtFQUNSLElBQUksQ0FBQyxPQUFPLE9BQU8sRUFB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
// denoCacheMetadata=6222550887599985100,10615636114821012856